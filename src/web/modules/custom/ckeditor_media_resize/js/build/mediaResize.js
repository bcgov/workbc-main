!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.mediaResize=t())}(self,(()=>(()=>{var e={"./node_modules/css-loader/dist/cjs.js!./js/ckeditor5_plugins/mediaResize/theme/mediaresize_editor.css":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),r=i.n(s),n=i("./node_modules/css-loader/dist/runtime/api.js"),o=i.n(n)()(r());o.push([e.id,"/**\n * This is necessary because the the filter_resize_media plugin runs when the\n * saved markup is loaded into the editor and sets an inline style on the\n * .media element that's fetched from and rendered on the server when the\n * editor loads.\n *\n * Because it gets rendered on the server, we can't access that part of the\n * markup inside the CKEditor5 drupolMedia Model, and thus we can't the\n * inline style on the rendered part but only on the wrapping model. As a\n * result there are 2 inline styles in the editor, so we're resetting the\n * one on the rendered markup for correct display inside the editor.\n */\n.drupal-media.ck-widget_with-resizer .media {\n  width: 100% !important;\n}\n\n.ck .drupal-media {\n  margin-left: 0;\n  margin-right: 0;\n  max-width: none;\n}\n\n.ck-content .drupal-media-style-align-center {\n  margin-left: auto;\n  margin-right: auto;\n}\n\nfigure.align-left,\n.ck figure.drupal-media.drupal-media-style-align-left {\n  margin-right: 1rem;\n}\n\nfigure.align-right,\n.ck figure.drupal-media.drupal-media-style-align-right {\n  margin-left: 1rem;\n}\n",""]);const a=o},"./node_modules/css-loader/dist/runtime/api.js":e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,r,n){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(o[d]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);s&&o[u[0]]||(void 0!==n&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=n),i&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=i):u[2]=i),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":e=>{"use strict";e.exports=function(e){return e[1]}},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":e=>{"use strict";var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var n={},o=[],a=0;a<e.length;a++){var d=e[a],l=s.base?d[0]+s.base:d[0],u=n[l]||0,c="".concat(l," ").concat(u);n[l]=u+1;var m=i(c),g={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==m)t[m].references++,t[m].updater(g);else{var h=r(g,s);s.byIndex=a,t.splice(a,0,{identifier:c,updater:h,references:1})}o.push(c)}return o}function r(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,r){var n=s(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<n.length;o++){var a=i(n[o]);t[a].references--}for(var d=s(e,r),l=0;l<n.length;l++){var u=i(n[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}n=d}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":e=>{"use strict";var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,r&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},"ckeditor5/src/core.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/engine.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/engine.js")},"ckeditor5/src/ui.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/utils.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/utils.js")},"ckeditor5/src/widget.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={id:s,exports:{}};return e[s](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0;var s={};return(()=>{"use strict";i.d(s,{default:()=>R});var e=i("ckeditor5/src/core.js"),t=i("ckeditor5/src/ui.js"),r=i("ckeditor5/src/utils.js");class n extends e.Command{refresh(){const e=this.editor,t=this.getClosestSelectedImageMediaModel(e.model.document.selection);this.isEnabled=!!t,t&&t.hasAttribute("width")?this.value={width:t.getAttribute("width"),height:null}:this.value=null}execute(e){const t=this.editor.model,i=this.getClosestSelectedImageMediaModel(t.document.selection);this.value={width:e.width,height:null},i&&t.change((t=>{t.setAttribute("width",e.width,i)}))}getClosestSelectedImageMediaModel(e){const t=e.getSelectedElement();if(!t)return null;const i=t.is("element","drupalMedia")?t:e.getFirstPosition().findAncestor("drupalMedia");if(!i)return null;const s=i.getAttribute("drupalMediaIsImage");return void 0===s||!1===s?null:i}}class o extends e.Plugin{static get pluginName(){return"MediaResizeEditing"}init(){const e=this.editor,t=new n(e);e.commands.add("resizeMediaImage",t)}afterInit(){this.editor.plugins.has("DrupalMediaEditing")&&(this._registerSchema(),this._registerConverters())}_registerSchema(){this.editor.model.schema.extend("drupalMedia",{allowAttributes:["width"]})}_registerConverters(){const e=this.editor,t=e.config._config.drupalMedia.dataAttribute;e.conversion.for("downcast").add((e=>e.on("attribute:width:drupalMedia",((e,i,s)=>{if(!s.consumable.consume(i.item,e.name))return;const r=s.writer,n=s.mapper.toViewElement(i.item);null!==i.attributeNewValue?(r.setStyle("width",i.attributeNewValue,n),r.setAttribute(t,i.attributeNewValue,n),r.addClass("image_resized",n)):(r.removeStyle("width",n),r.removeAttribute(t,n),r.removeClass("image_resized",n))})))),e.conversion.for("upcast").add((e=>e.on("element:drupal-media",((e,i,s)=>{const{schema:r,writer:n}=s,o=i.viewItem.getAttribute(t);for(const e of i.modelRange.getItems({shallow:!0}))r.checkAttribute(e,"width")&&n.setAttribute("width",o,e)}))))}}const a={small:e.icons.objectSizeSmall,medium:e.icons.objectSizeMedium,large:e.icons.objectSizeLarge,original:e.icons.objectSizeFull};class d extends e.Plugin{static get requires(){return[o]}static get pluginName(){return"MediaResizeButtons"}constructor(e){super(e),this._resizeUnit=e.config.get("drupalMedia.resizeUnit")}init(){const e=this.editor,t=e.config.get("drupalMedia.resizeOptions"),i=e.commands.get("resizeMediaImage");this.bind("isEnabled").to(i);for(const e of t)this._registerImageResizeButton(e);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const i=this.editor,{name:s,value:n,icon:o}=e,d=n?n+this._resizeUnit:null;i.ui.componentFactory.add(s,(s=>{const n=new t.ButtonView(s),u=i.commands.get("resizeMediaImage"),c=this._getOptionLabelValue(e,!0);if(!a[o])throw new r.CKEditorError("mediaresizebuttons-missing-icon",i,e);return n.set({label:c,icon:a[o],tooltip:c,isToggleable:!0}),n.bind("isEnabled").to(this),n.bind("isOn").to(u,"value",l(d)),this.listenTo(n,"execute",(()=>{i.execute("resizeMediaImage",{width:d})})),n}))}_registerImageResizeDropdown(e){const i=this.editor,s=i.t,r=e.find((e=>!e.value));i.ui.componentFactory.add("resizeMediaImage",(n=>{const o=i.commands.get("resizeMediaImage"),d=(0,t.createDropdown)(n,t.DropdownButtonView),l=d.buttonView;return l.set({tooltip:s("Resize media image"),commandValue:r.value,icon:a.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button"}),l.bind("label").to(o,"value",(e=>e&&e.width?e.width:this._getOptionLabelValue(r))),d.bind("isOn").to(o),d.bind("isEnabled").to(this),(0,t.addListToDropdown)(d,this._getResizeDropdownListItemDefinitions(e,o)),d.listView&&(d.listView.ariaLabel=s("Media image resize list")),this.listenTo(d,"execute",(e=>{i.execute(e.source.commandName,{width:e.source.commandValue}),i.editing.view.focus()})),d}))}_getOptionLabelValue(e,t){const i=this.editor.t;return e.label?e.label:t?e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):e.value?e.value+this._resizeUnit:i("Original")}_getResizeDropdownListItemDefinitions(e,i){const s=new r.Collection;return e.map((e=>{const r=e.value?e.value+this._resizeUnit:null,n={type:"button",model:new t.ViewModel({commandName:"resizeMediaImage",commandValue:r,label:this._getOptionLabelValue(e),withText:!0,icon:null})};n.model.bind("isOn").to(i,"value",l(r)),s.add(n)})),s}}function l(e){return t=>null===e&&t===e||t&&t.width===e}var u=i("ckeditor5/src/widget.js"),c=i("ckeditor5/src/engine.js");class m extends c.Observer{observe(e){this.listenTo(e,"load",((e,t)=>{const i=t.target;this.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&this._fireEvents(t)}),{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}const g=/(drupal-media)/,h="image_resized";class p extends e.Plugin{static get requires(){return[u.WidgetResize]}static get pluginName(){return"MediaResizeHandles"}init(){const e=this.editor.commands.get("resizeMediaImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view;t.addObserver(m),this.listenTo(t.document,"imageLoaded",((i,s)=>{if(!s.target.matches(".drupal-media.ck-widget img"))return;const r=e.editing.view.domConverter,n=r.domToView(s.target).findAncestor({classes:g});let o=this.editor.plugins.get(u.WidgetResize).getResizerByViewElement(n);if(o)return void o.redraw();const a=e.editing.mapper,d=a.toModelElement(n);o=e.plugins.get(u.WidgetResize).attachTo({unit:e.config.get("drupalMedia.resizeUnit"),modelElement:d,viewElement:n,editor:e,getHandleHost:e=>e,getResizeHost:()=>r.mapViewToDom(a.toViewElement(d.parent)),isCentered(){const e=d.getAttribute("imageStyle");return!e||"block"==e||"alignCenter"==e},onCommit(i){t.change((e=>{e.removeClass(h,n)})),e.execute("resizeMediaImage",{width:i})}}),o.on("updateSize",(()=>{n.hasClass(h)||t.change((e=>{e.addClass(h,n)}))})),o.bind("isEnabled").to(this)}))}}var f=i("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),v=i.n(f),b=i("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),w=i.n(b),y=i("./node_modules/style-loader/dist/runtime/insertBySelector.js"),z=i.n(y),_=i("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),j=i.n(_),M=i("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),x=i.n(M),C=i("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),E=i.n(C),I=i("./node_modules/css-loader/dist/cjs.js!./js/ckeditor5_plugins/mediaResize/theme/mediaresize_editor.css"),S={};S.styleTagTransform=E(),S.setAttributes=j(),S.insert=z().bind(null,"head"),S.domAPI=w(),S.insertStyleElement=x();v()(I.Z,S);I.Z&&I.Z.locals&&I.Z.locals;class T extends e.Plugin{static get requires(){return[o,p,d]}static get pluginName(){return"MediaResize"}}const R={MediaResize:T}})(),s=s.default})()));